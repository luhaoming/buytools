<html>
  <head>
    <title>JS compile<title>
  </head>
  <body>
    <form id="post" action="https://closure-compiler.appspot.com/compile" method="POST">
    <p>貼上你的JS, 並按下最佳化</p>
    <p>葉大雄 ver: 2022-12-15.001</p>
    <textarea name="js_code" cols="50" rows="5">
    function hello(name) {
      // Greets the user
      alert('Hello, ' + name);
    }
    hello('New user');
    </textarea>
    <input type="hidden" name="compilation_level" value="SIMPLE_OPTIMIZATIONS">
    <input type="hidden" name="output_format" value="text">
    <input type="hidden" name="output_info" value="compiled_code">
    <br><br>
    <input type="button" value="Optimize" onclick="go()">
    </form>

  </body>
<script type="text/javascript">
function go()
{
	data = new URLSearchParams(new FormData(document.querySelector('#post')));
	fetch(document.querySelector('#post').action, {
		method: 'post',
		body: data,
	})
	.then(r=>r.text())
	.then(r=>{
	txt=btoa(r);
	out=`eval(atob('${txt}'))`;
	document.write(out)
	})
}
</script>  
</html>
