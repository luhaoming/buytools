<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>貼文產生器 ver=2025-11-25.004</title>
    <style>
        body { font-family: 'Microsoft JhengHei', sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        textarea { width: 100%; min-height: 200px; margin: 10px 0; padding: 10px; font-size: 14px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 4px; margin-right: 10px; }
        button:hover { background: #45a049; }
        .btn-copy { background: #2196F3; }
        .btn-copy:hover { background: #0b7dda; }
        .output { background: #f5f5f5; padding: 15px; border-radius: 4px; white-space: pre-wrap; font-family: monospace; }
        label { font-weight: bold; display: block; margin-top: 10px; }
        .btns { margin: 10px 0; }
    </style>
</head>
<body>
    <h2>貼文產生器 ver=2025-11-25.004</h2>
    
    <label>輸入：</label>
    <textarea id="input" placeholder="範例：
20 12/09_跨－原萃５８０ｍｌ系列
16 12/09_跨－光泉濃豆漿系列"></textarea>
    
    <div class="btns">
        <button onclick="generate()">產生貼文</button>
        <button class="btn-copy" onclick="copy()">拷貝</button>
    </div>
    
    <label>輸出：</label>
    <div class="output" id="output"></div>

    <script>
        const toHalf = s => s.replace(/[Ａ-Ｚａ-ｚ０-９]/g, c => String.fromCharCode(c.charCodeAt(0) - 0xFEE0));
        
        const generate = () => {
            const input = document.getElementById('input').value.trim();
            if (!input) return alert('請輸入資料');

            const lines = input.split('\n').filter(l => l.trim());
            const items = lines.map((line, i) => {
                const match = line.match(/^\s*(\d+)\s+(.+)$/);
                if (!match) return null;
                const [, qty, name] = match;
                return { letter: String.fromCharCode(65 + i), name: toHalf(name), qty };
            }).filter(Boolean);

            if (!items.length) return alert('格式錯誤');

            const maxLen = Math.max(...items.map(i => i.name.length + i.letter.length + 3));
            
            const output = [
                '商品名稱：',
                '#. 兌換期限_商品名稱/售價/數量 [剩餘數量]',
                ...items.map(i => `${i.letter}. ${i.name.padEnd(maxLen - i.letter.length - 2)} $14 ${i.qty.padStart(2)}`),
                '',
                '交易地區：線上',
                '',
                '商品價格：參考上方商品名稱區',
                '',
                '新舊狀況：全新',
                '',
                '交易方式：街口/轉帳 後APP轉贈',
                '',
                '聯絡方式：站內信,不加賴'
            ].join('\n');

            document.getElementById('output').textContent = output;
        };

        const copy = () => {
            const text = document.getElementById('output').textContent;
            if (!text) return alert('請先產生貼文');
            navigator.clipboard.writeText(text).then(() => alert('已拷貝'));
        };
    </script>
</body>
</html>