<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <base href="https://mypocket.family.com.tw/">
  <link rel="stylesheet" href="static/v2/css/balanceQrcode.css">
  <link rel="stylesheet" href="static/v2/css/common.css">
  <title>酷碰卷</title>
</head>
<body>
  <div class="kp-container">
    <span class="close" onclick="window.close()"></span>
    <div class="content">
      <div class="top">
        <div class="img">
          <img src="https://mypocket.fami.life/static/v2/images/gold.png" alt="">
        </div>
        <p class="font-normal font-center font-black font-bold">紅利金餘額</p>
        <p class="font-orange font-30 balance font-center">$ 0</p>
        <div>
          <p class="font-normal font-blue font-center">這是展示畫面</p>
          <div class="barcode">
            <img id="barcode" src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ibGRzLXNwaW4iIHdpZHRoPSI4MHB4IiAgaGVpZ2h0PSI4MHB4IiAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MCw1MCkiPg0KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDApIj4NCiAgICAgICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjUiIGZpbGw9IiMyRjlDOTkiIGZpbGwtb3BhY2l0eT0iMSIgdHJhbnNmb3JtPSJzY2FsZSgxLjA3NjY3IDEuMDc2NjcpIj4NCiAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGJlZ2luPSItMC45MTY2NjY2NjY2NjY2NjY2cyIgdmFsdWVzPSIxLjIgMS4yOzEgMSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIHZhbHVlcz0iMTswIiBiZWdpbj0iLTAuOTE2NjY2NjY2NjY2NjY2NnMiPjwvYW5pbWF0ZT4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgPC9nPg0KPC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc1Ljk4MDc2MjExMzUzMzE2LDY1KSI+DQogICAgPGcgdHJhbnNmb3JtPSJyb3RhdGUoMjkuOTk5OTk5OTk5OTk5OTk2KSI+DQogICAgICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI1IiBmaWxsPSIjMkY5Qzk5IiBmaWxsLW9wYWNpdHk9IjAuOTE2NjY2NjY2NjY2NjY2NiIgdHJhbnNmb3JtPSJzY2FsZSgxLjA5MzMzIDEuMDkzMzMpIj4NCiAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGJlZ2luPSItMC44MzMzMzMzMzMzMzMzMzM0cyIgdmFsdWVzPSIxLjIgMS4yOzEgMSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIHZhbHVlcz0iMTswIiBiZWdpbj0iLTAuODMzMzMzMzMzMzMzMzMzNHMiPjwvYW5pbWF0ZT4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgPC9nPg0KPC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY1LDc1Ljk4MDc2MjExMzUzMzE2KSI+DQogICAgPGcgdHJhbnNmb3JtPSJyb3RhdGUoNTkuOTk5OTk5OTk5OTk5OTkpIj4NCiAgICAgICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjUiIGZpbGw9IiMyRjlDOTkiIGZpbGwtb3BhY2l0eT0iMC44MzMzMzMzMzMzMzMzMzM0IiB0cmFuc2Zvcm09InNjYWxlKDEuMTEgMS4xMSkiPg0KICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYmVnaW49Ii0wLjc1cyIgdmFsdWVzPSIxLjIgMS4yOzEgMSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIHZhbHVlcz0iMTswIiBiZWdpbj0iLTAuNzVzIj48L2FuaW1hdGU+DQogICAgICAgIDwvY2lyY2xlPg0KICAgIDwvZz4NCjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCw4MCkiPg0KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDkwKSI+DQogICAgICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI1IiBmaWxsPSIjMkY5Qzk5IiBmaWxsLW9wYWNpdHk9IjAuNzUiIHRyYW5zZm9ybT0ic2NhbGUoMS4xMjY2NyAxLjEyNjY3KSI+DQogICAgICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBiZWdpbj0iLTAuNjY2NjY2NjY2NjY2NjY2NnMiIHZhbHVlcz0iMS4yIDEuMjsxIDEiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiB2YWx1ZXM9IjE7MCIgYmVnaW49Ii0wLjY2NjY2NjY2NjY2NjY2NjZzIj48L2FuaW1hdGU+DQogICAgICAgIDwvY2lyY2xlPg0KICAgIDwvZz4NCjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNS4wMDAwMDAwMDAwMDAwMSw3NS45ODA3NjIxMTM1MzMxNikiPg0KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDExOS45OTk5OTk5OTk5OTk5OSkiPg0KICAgICAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iNSIgZmlsbD0iIzJGOUM5OSIgZmlsbC1vcGFjaXR5PSIwLjY2NjY2NjY2NjY2NjY2NjYiIHRyYW5zZm9ybT0ic2NhbGUoMS4xNDMzMyAxLjE0MzMzKSI+DQogICAgICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBiZWdpbj0iLTAuNTgzMzMzMzMzMzMzMzMzNHMiIHZhbHVlcz0iMS4yIDEuMjsxIDEiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiB2YWx1ZXM9IjE7MCIgYmVnaW49Ii0wLjU4MzMzMzMzMzMzMzMzMzRzIj48L2FuaW1hdGU+DQogICAgICAgIDwvY2lyY2xlPg0KICAgIDwvZz4NCjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMTkyMzc4ODY0NjY4NCw2NSkiPg0KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDE1MC4wMDAwMDAwMDAwMDAwMykiPg0KICAgICAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iNSIgZmlsbD0iIzJGOUM5OSIgZmlsbC1vcGFjaXR5PSIwLjU4MzMzMzMzMzMzMzMzMzQiIHRyYW5zZm9ybT0ic2NhbGUoMS4xNiAxLjE2KSI+DQogICAgICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBiZWdpbj0iLTAuNXMiIHZhbHVlcz0iMS4yIDEuMjsxIDEiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiB2YWx1ZXM9IjE7MCIgYmVnaW49Ii0wLjVzIj48L2FuaW1hdGU+DQogICAgICAgIDwvY2lyY2xlPg0KICAgIDwvZz4NCjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMCw1MC4wMDAwMDAwMDAwMDAwMSkiPg0KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDE4MCkiPg0KICAgICAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iNSIgZmlsbD0iIzJGOUM5OSIgZmlsbC1vcGFjaXR5PSIwLjUiIHRyYW5zZm9ybT0ic2NhbGUoMS4xNzY2NyAxLjE3NjY3KSI+DQogICAgICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBiZWdpbj0iLTAuNDE2NjY2NjY2NjY2NjY2N3MiIHZhbHVlcz0iMS4yIDEuMjsxIDEiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiB2YWx1ZXM9IjE7MCIgYmVnaW49Ii0wLjQxNjY2NjY2NjY2NjY2NjdzIj48L2FuaW1hdGU+DQogICAgICAgIDwvY2lyY2xlPg0KICAgIDwvZz4NCjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMTkyMzc4ODY0NjY4MzYsMzUuMDAwMDAwMDAwMDAwMDEpIj4NCiAgICA8ZyB0cmFuc2Zvcm09InJvdGF0ZSgyMDkuOTk5OTk5OTk5OTk5OTcpIj4NCiAgICAgICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjUiIGZpbGw9IiMyRjlDOTkiIGZpbGwtb3BhY2l0eT0iMC40MTY2NjY2NjY2NjY2NjY3IiB0cmFuc2Zvcm09InNjYWxlKDEuMTkzMzMgMS4xOTMzMykiPg0KICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYmVnaW49Ii0wLjMzMzMzMzMzMzMzMzMzMzNzIiB2YWx1ZXM9IjEuMiAxLjI7MSAxIiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbC1vcGFjaXR5IiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgdmFsdWVzPSIxOzAiIGJlZ2luPSItMC4zMzMzMzMzMzMzMzMzMzMzcyI+PC9hbmltYXRlPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICA8L2c+DQo8L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuOTk5OTk5OTk5OTk5OTg2LDI0LjAxOTIzNzg4NjQ2Njg0NykiPg0KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDIzOS45OTk5OTk5OTk5OTk5NykiPg0KICAgICAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iNSIgZmlsbD0iIzJGOUM5OSIgZmlsbC1vcGFjaXR5PSIwLjMzMzMzMzMzMzMzMzMzMzMiIHRyYW5zZm9ybT0ic2NhbGUoMS4wMSAxLjAxKSI+DQogICAgICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBiZWdpbj0iLTAuMjVzIiB2YWx1ZXM9IjEuMiAxLjI7MSAxIiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbC1vcGFjaXR5IiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgdmFsdWVzPSIxOzAiIGJlZ2luPSItMC4yNXMiPjwvYW5pbWF0ZT4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgPC9nPg0KPC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ5Ljk5OTk5OTk5OTk5OTk5LDIwKSI+DQogICAgPGcgdHJhbnNmb3JtPSJyb3RhdGUoMjcwKSI+DQogICAgICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI1IiBmaWxsPSIjMkY5Qzk5IiBmaWxsLW9wYWNpdHk9IjAuMjUiIHRyYW5zZm9ybT0ic2NhbGUoMS4wMjY2NyAxLjAyNjY3KSI+DQogICAgICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBiZWdpbj0iLTAuMTY2NjY2NjY2NjY2NjY2NjZzIiB2YWx1ZXM9IjEuMiAxLjI7MSAxIiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbC1vcGFjaXR5IiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgdmFsdWVzPSIxOzAiIGJlZ2luPSItMC4xNjY2NjY2NjY2NjY2NjY2NnMiPjwvYW5pbWF0ZT4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgPC9nPg0KPC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY1LDI0LjAxOTIzNzg4NjQ2Njg0MykiPg0KICAgIDxnIHRyYW5zZm9ybT0icm90YXRlKDMwMC4wMDAwMDAwMDAwMDAwNikiPg0KICAgICAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iNSIgZmlsbD0iIzJGOUM5OSIgZmlsbC1vcGFjaXR5PSIwLjE2NjY2NjY2NjY2NjY2NjY2IiB0cmFuc2Zvcm09InNjYWxlKDEuMDQzMzMgMS4wNDMzMykiPg0KICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYmVnaW49Ii0wLjA4MzMzMzMzMzMzMzMzMzMzcyIgdmFsdWVzPSIxLjIgMS4yOzEgMSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIHZhbHVlcz0iMTswIiBiZWdpbj0iLTAuMDgzMzMzMzMzMzMzMzMzMzNzIj48L2FuaW1hdGU+DQogICAgICAgIDwvY2lyY2xlPg0KICAgIDwvZz4NCjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NS45ODA3NjIxMTM1MzMxNiwzNC45OTk5OTk5OTk5OTk5ODYpIj4NCiAgICA8ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMjkuOTk5OTk5OTk5OTk5OTQpIj4NCiAgICAgICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjUiIGZpbGw9IiMyRjlDOTkiIGZpbGwtb3BhY2l0eT0iMC4wODMzMzMzMzMzMzMzMzMzMyIgdHJhbnNmb3JtPSJzY2FsZSgxLjA2IDEuMDYpIj4NCiAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGJlZ2luPSIwcyIgdmFsdWVzPSIxLjIgMS4yOzEgMSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIHZhbHVlcz0iMTswIiBiZWdpbj0iMHMiPjwvYW5pbWF0ZT4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgPC9nPg0KPC9nPjwvc3ZnPg==" alt="barcode" srcset="">
          </div>
          <div class="tips flex flex-between">
            <a href="#" class="font-small font-black-5D677c" id="tipsAlert">不可折抵商品/服務？</a>
            <p class="font-small font-grey clickBig">點擊放大顯示</p>
          </div>
          <p class="font-grey font-13 font-center expiretime">條碼更新中...</p>
        </div>
      </div>
      <div class="bottom">
        <div class="flex flex-row flex-between">
          <p class="font-grey font-13">紅利金-不可折抵 點卡</p>
          <p class="font-black-5D677c font-13 balance-sub">$</p>
        </div>
        <div class="flex flex-row flex-between" style="margin-top: 9px">
          <p class="font-grey font-13">紅利金-可折抵 點卡</p>
          <p class="font-black-5D677c font-13">$ 0</p>
        </div>
        <div class="warning font-13 font-black-5D677c">
          <p class="font-bold">注意事項</p>
          <div class="flex flex-row flex-end">
            <ul class="flex-1">
              <li style="overflow: unset;"><p>紅利金PIN碼一經使用，一律不接受退貨/退款。</p></li>
              <li><p>紅利金PIN碼逾期將無效，且PIN碼逾期後將由系統自動扣除PIN碼剩餘金額，不得以任何理由要求補發或等值商品。</p></li>
            </ul>
            <a href="#" class="more font-black-5D677c">查看更多</a>
          </div>
        </div>
      </div>
    </div>
    <div class="button flex flex-row flex-between">
      <a href="#" class="font-larger font-center font-white background-orange">查看記錄</a>
      <a href="#" class="font-larger font-orange background-white font-center">完成兌換</a>
    </div>
  </div>
  <script>
    // 簡單簽章函式（simpleHash） — 前後端都能用的輕量雜湊
    function simpleHash(str) {
      let h = 0;
      for (let i = 0; i < str.length; i++) {
        h = (h * 31 + str.charCodeAt(i)) & 0xffffffff;
      }
      return (h >>> 0).toString(16);
    }

    const SECRET = 'sample'; // 預設 secret

    // 更新畫面的函式
    function updateDisplay(data) {
      const { balance, barcode, expdate } = data;
      document.querySelector('.balance').textContent = `$ ${balance}`;
      document.querySelector('.balance-sub').textContent = `$ ${balance}`;
      document.querySelector('.font-blue').textContent = expdate;
      const barcodeEl = document.getElementById('barcode');
      if (barcode) {
        barcodeEl.src = barcode;
        document.querySelector('.barcode').style.display = 'block';
      }
    }

    // 隱藏條碼並顯示餘額不足提示
    function showInsufficientBalance(balance) {
      const barcodeWrap = document.querySelector('.barcode');
      if (barcodeWrap) barcodeWrap.style.display = 'none';
      document.querySelector('.balance').textContent = `$ ${balance}`;
      document.querySelector('.balance-sub').textContent = `$ ${balance}`;
      const expireEl = document.querySelector('.expiretime');
      if (expireEl) expireEl.innerHTML = '您的帳戶餘額不足<br>請選擇其他支付方式';
    }

    // 倒數計時函式
    function startCountdown() {
      const expireElement = document.querySelector('.expiretime');
      if (!expireElement) return;

      let totalSeconds = 1 * 60 + 54; // 1分54秒
      const timerInterval = setInterval(() => {
        if (totalSeconds === 3) window.location.reload();
        if (totalSeconds <= 0) {
          clearInterval(timerInterval);
          expireElement.textContent = '條碼已過期';
          return;
        }
        totalSeconds--;
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        const formattedSeconds = seconds < 10 ? '0' + seconds : seconds;
        expireElement.textContent = `條碼有效期限${minutes}:${formattedSeconds}`;
      }, 1000);
    }

    document.addEventListener('DOMContentLoaded', function() {
      // 1. 先用預設資料顯示畫面
      const preliminaryData = {
        "balance": 9999,
        "barcode": "data:image/svg+xml;base64,...",
        "expdate": "這是展示畫面"
      };
      // updateDisplay(preliminaryData);

      // 2. 取得網址id
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('id');
      if (!id) {
        document.querySelector('.expiretime').textContent = '缺少ID參數';
        return;
      }

      // 3. 準備簽章參數 (ts, sig)
      const ts = Date.now().toString();
      const sig = simpleHash(id + ts + SECRET);

      // 4. 呼叫API取得真實資料 (加入 ts 與 sig)
      const apiBase = 'https://script.google.com/macros/s/AKfycby4mv4_xxC1Ft0vnfkBNelfmCaRLMleflPWX5P26j8eGSCw4cUgl8MrQIQqOB7BjRsK/exec';
      const apiUrl = `${apiBase}?id=${encodeURIComponent(id)}&ts=${encodeURIComponent(ts)}&sig=${encodeURIComponent(sig)}`;

      fetch(apiUrl)
        .then(response => response.json())
        .then(result => {
          if (result.status !== 'success') {
             console.error('API Error:', result);
             document.querySelector('.barcode').style.display = 'none';
             document.querySelector('.expiretime').textContent = result.data;
             return;
          }

          const data = result.data || {};
          const bal = Number(data.balance);

          // 如果 API 回傳 balance <=0 或沒有 barcode
          if (data.hasOwnProperty('balance') && (isNaN(bal) || bal <= 0 || !data.barcode)) {
            showInsufficientBalance(data.balance || 0);
            return;
          }

          // 正常顯示條碼並啟動倒數
          updateDisplay(data);
          startCountdown();
        })
        .catch(error => {
            console.error('Fetch Error:', error);
            document.querySelector('.expiretime').textContent = '網路連線失敗';
        });
    });
  </script>
</body>
</html>